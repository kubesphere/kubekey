{
  "log-opts": {
    "max-size": "5m",
    "max-file":"3"
  },
{{- if .cri.docker.data_root }}
  "data-root": "{{ .cri.docker.data_root }}",
{{- end }}
{{- if .cri.registry.mirrors }}
  "registry-mirrors": {{ .cri.registry.mirrors | toJson }},
{{- end }}
{{- $insecure_registries := .cri.registry.insecure_registries | default list }} 
{{- if and .image_registry.auth.skip_tls_verify (.image_registry.auth.registry | empty | not) }}
  {{- $insecure_registries = append $insecure_registries .image_registry.auth.registry | splitList "/" | first }}
{{- end }}
{{- range .cri.registry.auths | default list }}
  {{- if and .skip_tls_verify (.registry | empty | not) }}
    {{- $insecure_registries = append $insecure_registries .registry }}
  {{- end }}
{{- end }}
  "insecure-registries": {{ $insecure_registries | toJson }},
 {{- if .cri.docker.bridge_ip }}
  "bip": "{{ .cri.docker.bridge_ip }}",
{{- end }}
  "exec-opts": ["native.cgroupdriver={{ .cri.cgroup_driver }}"]
}
