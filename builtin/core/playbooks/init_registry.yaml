---
- hosts:
    - all
  roles:
    - native/root
# Load default variables and perform prechecks on all hosts
- hosts:
    - all
  gather_facts: true
  roles:
    - defaults
    - precheck/image-registry


# Download all required software and generate certificates on the localhost
- hosts:
    - localhost
  gather_facts: true
  roles:
    - role: certs/init
    - role: download

# Initialize all nodes and install necessary software packages
- hosts:
    - image_registry
  tags: ["always"]
  roles:
    - role: native/dns
    - role: native/init
    - role: image-registry
