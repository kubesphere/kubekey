
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.6.1
  creationTimestamp: null
  name: machinesets.kubekey.kubesphere.io
spec:
  group: kubekey.kubesphere.io
  names:
    kind: MachineSet
    listKind: MachineSetList
    plural: machinesets
    singular: machineset
  scope: Namespaced
  versions:
  - name: v1alpha3
    schema:
      openAPIV3Schema:
        description: MachineSet is the Schema for the machinesets API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: MachineSetSpec defines the desired state of MachineSet
            properties:
              clusterName:
                description: ClusterName is the name of the Cluster this object belongs
                  to.
                type: string
              selector:
                description: 'Selector is a label query over machines that should
                  match the replica count. Label keys and values that must match in
                  order to be controlled by this MachineSet. It must match the machine
                  template''s labels. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/#label-selectors'
                properties:
                  matchExpressions:
                    description: matchExpressions is a list of label selector requirements.
                      The requirements are ANDed.
                    items:
                      description: A label selector requirement is a selector that
                        contains values, a key, and an operator that relates the key
                        and values.
                      properties:
                        key:
                          description: key is the label key that the selector applies
                            to.
                          type: string
                        operator:
                          description: operator represents a key's relationship to
                            a set of values. Valid operators are In, NotIn, Exists
                            and DoesNotExist.
                          type: string
                        values:
                          description: values is an array of string values. If the
                            operator is In or NotIn, the values array must be non-empty.
                            If the operator is Exists or DoesNotExist, the values
                            array must be empty. This array is replaced during a strategic
                            merge patch.
                          items:
                            type: string
                          type: array
                      required:
                      - key
                      - operator
                      type: object
                    type: array
                  matchLabels:
                    additionalProperties:
                      type: string
                    description: matchLabels is a map of {key,value} pairs. A single
                      {key,value} in the matchLabels map is equivalent to an element
                      of matchExpressions, whose key field is "key", the operator
                      is "In", and the values array contains only "value". The requirements
                      are ANDed.
                    type: object
                type: object
              template:
                description: Template is the object that describes the machine that
                  will be created if insufficient replicas are detected. Object references
                  to custom resources are treated as templates.
                properties:
                  auth:
                    description: Auth is the SSH authentication information of the
                      machine.
                    properties:
                      password:
                        description: Password is the password for SSH authentication.
                        type: string
                      port:
                        description: Port is the port for SSH authentication.
                        type: integer
                      privateKey:
                        description: PrivateKey is the value of the private key for
                          SSH authentication.
                        type: string
                      privateKeyPath:
                        description: PrivateKeyFile is the path to the private key
                          for SSH authentication.
                        type: string
                      timeout:
                        description: Timeout is the timeout for establish an SSH connection.
                        format: int64
                        type: integer
                      user:
                        description: User is the username for SSH authentication.
                        type: string
                    type: object
                  containerManager:
                    description: ContainerManager is the container manager of the
                      machine.
                    properties:
                      criSocket:
                        description: CRISocket is used to connect an existing CRIClient.
                        type: string
                      registries:
                        description: Registries defines the registries' config of
                          ContainerManager.
                        items:
                          description: RegistryConfig is the configuration for a cluster
                            registry
                          properties:
                            auth:
                              description: Auth defines the auth of this PrivateRegistry.
                              properties:
                                caFile:
                                  description: CAFile is an SSL Certificate Authority
                                    file used to secure etcd communication.
                                  type: string
                                certFile:
                                  description: CertFile is an SSL certification file
                                    used to secure etcd communication.
                                  type: string
                                certsPath:
                                  description: CertsPath defines the path of the certs
                                    files of this PrivateRegistry.
                                  type: string
                                insecureSkipVerify:
                                  description: InsecureSkipVerify allow contacting
                                    this PrivateRegistry over HTTPS with failed TLS
                                    verification.
                                  type: boolean
                                keyFile:
                                  description: KeyFile is an SSL key file used to
                                    secure etcd communication.
                                  type: string
                                password:
                                  description: Password defines the password of this
                                    PrivateRegistry.
                                  type: string
                                plainHTTP:
                                  description: PlainHTTP allow contacting this PrivateRegistry
                                    over HTTP.
                                  type: boolean
                                username:
                                  description: Username defines the username of this
                                    PrivateRegistry.
                                  type: string
                              required:
                              - certsPath
                              - insecureSkipVerify
                              - password
                              - plainHTTP
                              - username
                              type: object
                            namespaceOverride:
                              description: NamespaceOverride defines the namespace
                                override of this PrivateRegistry.
                              type: string
                            privateRegistry:
                              description: PrivateRegistry defines the private registry
                                address of ContainerManager.
                              type: string
                            registryMirrors:
                              description: RegistryMirrors defines the registry mirrors
                                of this PrivateRegistry.
                              items:
                                type: string
                              type: array
                          required:
                          - auth
                          - namespaceOverride
                          - privateRegistry
                          type: object
                        type: array
                      type:
                        description: Type defines the type of ContainerManager. "docker",
                          "containerd"
                        type: string
                      version:
                        description: Version defines the version of ContainerManager.
                        type: string
                    required:
                    - registries
                    - type
                    - version
                    type: object
                  machines:
                    description: Machines is the list of machines that will be created
                      from this template.
                    items:
                      description: MachineSpec defines the desired state of Machine
                      properties:
                        address:
                          description: Address is the IP address of the machine.
                          type: string
                        arch:
                          description: Arch is the architecture of the machine. e.g.
                            "amd64", "arm64".
                          type: string
                        auth:
                          description: Auth is the SSH authentication information
                            of the machine.
                          properties:
                            password:
                              description: Password is the password for SSH authentication.
                              type: string
                            port:
                              description: Port is the port for SSH authentication.
                              type: integer
                            privateKey:
                              description: PrivateKey is the value of the private
                                key for SSH authentication.
                              type: string
                            privateKeyPath:
                              description: PrivateKeyFile is the path to the private
                                key for SSH authentication.
                              type: string
                            timeout:
                              description: Timeout is the timeout for establish an
                                SSH connection.
                              format: int64
                              type: integer
                            user:
                              description: User is the username for SSH authentication.
                              type: string
                          type: object
                        clusterName:
                          description: ClusterName is the name of the Cluster this
                            object belongs to.
                          type: string
                        containerManager:
                          description: ContainerManager is the container manager of
                            the machine.
                          properties:
                            criSocket:
                              description: CRISocket is used to connect an existing
                                CRIClient.
                              type: string
                            registries:
                              description: Registries defines the registries' config
                                of ContainerManager.
                              items:
                                description: RegistryConfig is the configuration for
                                  a cluster registry
                                properties:
                                  auth:
                                    description: Auth defines the auth of this PrivateRegistry.
                                    properties:
                                      caFile:
                                        description: CAFile is an SSL Certificate
                                          Authority file used to secure etcd communication.
                                        type: string
                                      certFile:
                                        description: CertFile is an SSL certification
                                          file used to secure etcd communication.
                                        type: string
                                      certsPath:
                                        description: CertsPath defines the path of
                                          the certs files of this PrivateRegistry.
                                        type: string
                                      insecureSkipVerify:
                                        description: InsecureSkipVerify allow contacting
                                          this PrivateRegistry over HTTPS with failed
                                          TLS verification.
                                        type: boolean
                                      keyFile:
                                        description: KeyFile is an SSL key file used
                                          to secure etcd communication.
                                        type: string
                                      password:
                                        description: Password defines the password
                                          of this PrivateRegistry.
                                        type: string
                                      plainHTTP:
                                        description: PlainHTTP allow contacting this
                                          PrivateRegistry over HTTP.
                                        type: boolean
                                      username:
                                        description: Username defines the username
                                          of this PrivateRegistry.
                                        type: string
                                    required:
                                    - certsPath
                                    - insecureSkipVerify
                                    - password
                                    - plainHTTP
                                    - username
                                    type: object
                                  namespaceOverride:
                                    description: NamespaceOverride defines the namespace
                                      override of this PrivateRegistry.
                                    type: string
                                  privateRegistry:
                                    description: PrivateRegistry defines the private
                                      registry address of ContainerManager.
                                    type: string
                                  registryMirrors:
                                    description: RegistryMirrors defines the registry
                                      mirrors of this PrivateRegistry.
                                    items:
                                      type: string
                                    type: array
                                required:
                                - auth
                                - namespaceOverride
                                - privateRegistry
                                type: object
                              type: array
                            type:
                              description: Type defines the type of ContainerManager.
                                "docker", "containerd"
                              type: string
                            version:
                              description: Version defines the version of ContainerManager.
                              type: string
                          required:
                          - registries
                          - type
                          - version
                          type: object
                        internalAddress:
                          description: InternalAddress is the internal IP address
                            of the machine.
                          type: string
                        name:
                          description: Name is the host name of the machine.
                          minLength: 1
                          type: string
                        nodeDeletionTimeout:
                          description: NodeDeletionTimeout defines how long the controller
                            will attempt to delete the Node that the Machine hosts
                            after the Machine is marked for deletion. A duration of
                            0 will retry deletion indefinitely. Defaults to 10 seconds.
                          type: string
                        nodeDrainTimeout:
                          description: 'NodeDrainTimeout is the total amount of time
                            that the controller will spend on draining a node. The
                            default value is 0, meaning that the node can be drained
                            without any time limitations. NOTE: NodeDrainTimeout is
                            different from `kubectl drain --timeout`'
                          type: string
                      required:
                      - address
                      - arch
                      - clusterName
                      - internalAddress
                      - name
                      type: object
                    type: array
                  metadata:
                    description: 'Standard object''s metadata. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#metadata'
                    properties:
                      annotations:
                        additionalProperties:
                          type: string
                        description: 'Annotations is an unstructured key value map
                          stored with a resource that may be set by external tools
                          to store and retrieve arbitrary metadata. They are not queryable
                          and should be preserved when modifying objects. More info:
                          http://kubernetes.io/docs/user-guide/annotations'
                        type: object
                      labels:
                        additionalProperties:
                          type: string
                        description: 'Map of string keys and values that can be used
                          to organize and categorize (scope and select) objects. May
                          match selectors of replication controllers and services.
                          More info: http://kubernetes.io/docs/user-guide/labels'
                        type: object
                    type: object
                required:
                - machines
                type: object
            required:
            - clusterName
            - selector
            type: object
          status:
            description: MachineSetStatus defines the observed state of MachineSet
            properties:
              conditions:
                description: Conditions defines current service state of the MachineSet.
                items:
                  description: Condition defines an observation of a Cluster API resource
                    operational state.
                  properties:
                    lastTransitionTime:
                      description: Last time the condition transitioned from one status
                        to another. This should be when the underlying condition changed.
                        If that is not known, then using the time when the API field
                        changed is acceptable.
                      format: date-time
                      type: string
                    message:
                      description: A human readable message indicating details about
                        the transition. This field may be empty.
                      type: string
                    reason:
                      description: The reason for the condition's last transition
                        in CamelCase. The specific API may choose whether or not this
                        field is considered a guaranteed API. This field may not be
                        empty.
                      type: string
                    severity:
                      description: Severity provides an explicit classification of
                        Reason code, so the users or machines can immediately understand
                        the current situation and act accordingly. The Severity field
                        MUST be set only when Status=False.
                      type: string
                    status:
                      description: Status of the condition, one of True, False, Unknown.
                      type: string
                    type:
                      description: Type of condition in CamelCase or in foo.example.com/CamelCase.
                        Many .condition.type values are consistent across resources
                        like Available, but because arbitrary conditions can be useful
                        (see .node.status.conditions), the ability to deconflict is
                        important.
                      type: string
                  required:
                  - lastTransitionTime
                  - status
                  - type
                  type: object
                type: array
              failureMessage:
                type: string
              failureReason:
                description: "In the event that there is a terminal problem reconciling
                  the replicas, both FailureReason and FailureMessage will be set.
                  FailureReason will be populated with a succinct value suitable for
                  machine interpretation, while FailureMessage will contain a more
                  verbose string suitable for logging and human consumption. \n These
                  fields should not be set for transitive errors that a controller
                  faces that are expected to be fixed automatically over time (like
                  service outages), but instead indicate that something is fundamentally
                  wrong with the MachineTemplate's spec or the configuration of the
                  machine controller, and that manual intervention is required. Examples
                  of terminal errors would be invalid combinations of settings in
                  the spec, values that are unsupported by the machine controller,
                  or the responsible machine controller itself being critically misconfigured.
                  \n Any transient errors that occur during the reconciliation of
                  Machines can be added as events to the MachineSet object and/or
                  logged in the controller's output."
                type: string
              fullyLabeledReplicas:
                description: The number of replicas that have labels matching the
                  labels of the machine template of the MachineSet.
                format: int32
                type: integer
              observedGeneration:
                description: ObservedGeneration reflects the generation of the most
                  recently observed MachineSet.
                format: int64
                type: integer
              readyReplicas:
                description: The number of ready replicas for this MachineSet. A machine
                  is considered ready when the node has been created and is "Ready".
                format: int32
                type: integer
              replicas:
                description: Replicas is the most recently observed number of replicas.
                format: int32
                type: integer
              selector:
                description: 'Selector is the same as the label selector but in the
                  string format to avoid introspection by clients. The string will
                  be in the same format as the query-param syntax. More info about
                  label selectors: http://kubernetes.io/docs/user-guide/labels#label-selectors'
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []
